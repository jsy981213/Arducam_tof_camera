cmake_minimum_required(VERSION 3.4)
project(PreviewPointcloud)
find_package(PCL QUIET)

if(PCL_FOUND)
    if(PLATFORM STREQUAL "NANO")
        message("JETSON_NANO!")
        add_definitions(-D__JETSON_NANO__)
    endif()
    if(PLATFORM STREQUAL "NX")
        message("JETSON_NX!")
        add_definitions(-D__JETSON_NX__)
    endif()
    if(PLATFORM STREQUAL "DEFAULT")
        message("DEFAULT!")
        add_definitions(-D__DEFAULT__)
    endif()
    include_directories(BEFORE /usr/include/c /usr/include/cpp)
    find_package(OpenCV REQUIRED)
    include_directories(${OpenCV_INCLUDE_DIRS})
    message(STATUS "LIBPCL_LINK_LIBRARIES=${PCL_INCLUDE_DIRS}")
    message(STATUS "EPOXY_LINK_LIBRARIES=${PCL_LIBRARY_DIRS}")
    include_directories(${PCL_INCLUDE_DIRS})
    link_directories(${PCL_LIBRARY_DIRS})
    add_definitions(${PCL_DEFINITIONS})
    add_executable(preview_pointcloud preview_pointcloud.cpp)
    target_link_libraries(preview_pointcloud ${PCL_LIBRARIES} -lboost_thread -lpthread ArducamDepthCamera ${OpenCV_LIBS})
else()
    message(STATUS "PCL point cloud preview skipped!")
endif()
